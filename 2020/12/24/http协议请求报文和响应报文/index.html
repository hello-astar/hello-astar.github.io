<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><title>http协议请求报文和响应报文 | Astar's Blog</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="Astar"><meta name="designer" content="minfive"><meta name="keywords" content="astar, astar blog, 前端, 前端开发, 全栈开发, javascript, node.js, 程序员, web"><meta name="description" content="日常学习与兴趣交流的个人博客"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=yes"><meta name="mobile-web-app-capable" content="yes"><meta name="robots" content="all"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><link rel="canonical" href="http://example.com/2020/12/24/http%E5%8D%8F%E8%AE%AE%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87%E5%92%8C%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87/index.html"><link rel="icon" type="image/png" href="/img/avatar.jpg" sizes="32x32"><link rel="stylesheet" href="/scss/base/index.css"><link rel="alternate" href="/atom.xml" title="Astar" type="application/atom+xml"><link rel="stylesheet" href="/scss/views/page/post.css"><meta name="generator" content="Hexo 5.3.0"></head><body ontouchstart><div id="page-loading" class="page page-loading" style="background-image:url(/img/loading.gif)"></div><div id="page" class="page js-hidden"><header class="page__small-header page__header--small"><nav class="page__navbar"><div class="page__container navbar-container"><a class="page__logo" href="/" title="Astar" alt="Astar"><img src="/img/avatar.jpg" alt="Astar"></a><nav class="page__nav"><ul class="nav__list clearfix"><li class="nav__item"><a href="/" alt="首页" title="首页">首页</a></li><li class="nav__item"><a href="/archives" alt="归档" title="归档">归档</a></li><li class="nav__item"><a href="/about" alt="关于" title="关于">关于</a></li></ul></nav><button class="page__menu-btn" type="button"><i class="iconfont icon-menu"></i></button></div></nav></header><main class="page__container page__main"><div class="page__content"><article class="page__post"><div class="post__cover"></div><header class="post__info"><h1 class="post__title">http协议请求报文和响应报文</h1><div class="post__mark"><div class="mark__block"><i class="mark__icon iconfont icon-write"></i><ul class="mark__list clearfix"><li class="mark__item"><a target="_blank" rel="noopener" href="https://github.com/hello-astar">Astar</a></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-time"></i><ul class="mark__list clearfix"><li class="mark__item"><span>2020-12-24</span></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-tab"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/">网络基础</a></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-eye"></i><ul class="mark__list clearfix"><li id="busuanzi_container_page_pv" class="mark__item"><span id="busuanzi_value_page_pv"></span>次</li></ul></div></div></header><div class="post__content"><h2 id="一、HTTP的Request-Response"><a href="#一、HTTP的Request-Response" class="headerlink" title="一、HTTP的Request/Response"></a>一、HTTP的Request/Response</h2><p>先看<code>Request</code>消息（客户端发送）的结构, Request 消息分为3部分<br>第一部分叫请求行（Request line）, 第二部分叫请求头（Request header）,第三部分是报文主体（body）. header和body之间有个空行。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请求行 &#x3D; 请求方法 + 请求URI + HTTP版本号</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20190118104803876.png" alt="在这里插入图片描述"><br>再看<code>Response</code>消息（服务器端发送）的结构，Response消息分为3部分<br>第一部分叫状态行，第二部分叫响应头，第三部分是响应主体，header和body之间有个空行。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">状态行 &#x3D; HTTP版本号 + 状态码 + 原因短语</span><br></pre></td></tr></table></figure><p>当使用的是<code>GET</code> 方法的时候， body是为空的。<br>比如如下图<br>我们打开Fiddler 捕捉一个网页的Request 然后分析下它的结构, 在Inspectors tab下以<strong>Raw</strong>的方式可以看到完整的Request的消息<br><img src="https://img-blog.csdnimg.cn/20200419134127301.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RyYWN5X2Zyb2c=,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><h2 id="二、HTTP首部"><a href="#二、HTTP首部" class="headerlink" title="二、HTTP首部"></a>二、HTTP首部</h2><p>一般有4种首部，分别是通用首部、请求首部、响应首部和实体首部。</p><h3 id="1-通用首部字段"><a href="#1-通用首部字段" class="headerlink" title="1. 通用首部字段"></a>1. 通用首部字段</h3><h4 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h4><p>作用：<br><code>这个是非常重要的规则</code>，用于控制缓存的行为。 这个用来指定Response-Request遵循的<code>缓存机制</code>。各个指令含义如下</p><p><code>Cache-Control:max-age=10</code><br>强缓存，单位秒</p><p><code>Cache-Control:public</code><br>可以被任何对象所缓存（包括：发送请求的客户端，代理服务器，等等），即使是通常不可缓存的内容（例如，该响应没有max-age指令或Expires消息头）</p><p><code>Cache-Control:private</code><br>内容只缓存到私有缓存中</p><p><code>Cache-Control:no-cache</code><br>使用协商缓存，同 max-age=0</p><p><code>Cache-Control:no-store</code><br>直接禁止浏览器缓存数据，每次用户请求该资源，都会向服务器发送一个请求，每次都会下载完整的资源，可用于关闭缓存。</p><h4 id="Connection"><a href="#Connection" class="headerlink" title="Connection"></a>Connection</h4><p>例如：<code>Connection: keep-alive</code>当一个网页打开完成后，客户端和服务器之间用于传输HTTP数据的TCP连接不会关闭，如果客户端再次访问这个服务器上的网页，会继续使用这一条已经建立的连接。<br>例如： <code>Connection: close</code> 代表一个Request完成后，客户端和服务器之间用于传输HTTP数据的TCP连接会关闭， 当客户端再次发送Request，需要重新建立TCP连接。</p><h4 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h4><p>作用: 生成消息的具体时间和日期<br>例如：Date: Sat, 11 Feb 2012 11:35:14 GMT</p><h4 id="Pragma"><a href="#Pragma" class="headerlink" title="Pragma"></a>Pragma</h4><p>作用：防止页面被缓存，在HTTP/1.1版本中，它和Cache-Control:no-cache作用一模一样<br>Pargma只有一个用法， 例如： Pragma: no-cache</p><h4 id="Trailer"><a href="#Trailer" class="headerlink" title="Trailer"></a>Trailer</h4><p>作用：报文末端的首部一览</p><h4 id="Transfer-Encoding"><a href="#Transfer-Encoding" class="headerlink" title="Transfer-Encoding"></a>Transfer-Encoding</h4><p>作用：指定报文主体的传输编码方式</p><h4 id="Upgrade"><a href="#Upgrade" class="headerlink" title="Upgrade"></a>Upgrade</h4><p><strong>作用</strong>：升级为其他协议</p><h4 id="Via"><a href="#Via" class="headerlink" title="Via"></a>Via</h4><p>作用：代理服务器的相关信息</p><h4 id="Warning"><a href="#Warning" class="headerlink" title="Warning"></a>Warning</h4><p>作用：错误通知</p><h3 id="2-请求首部字段"><a href="#2-请求首部字段" class="headerlink" title="2. 请求首部字段"></a>2. 请求首部字段</h3><h4 id="Accept"><a href="#Accept" class="headerlink" title="Accept"></a>Accept</h4><p>作用： 浏览器端可以接受的<code>媒体类型</code><br>例如： <code>Accept: text/html</code> 代表浏览器可以接受服务器回发的类型为 text/html 也就是我们常说的html文档,<br>如果服务器无法返回text/html类型的数据,服务器应该返回一个406错误(not acceptable)<br>通配符 <code>*</code> 代表任意类型<br>例如 <code>Accept: */*</code> 代表浏览器可以处理所有类型,(一般浏览器发给服务器都是发这个)</p><h4 id="Accept-Charset"><a href="#Accept-Charset" class="headerlink" title="Accept-Charset"></a>Accept-Charset</h4><p>作用：<code>浏览器申明自己接收的字符集</code>，这就是本文前面介绍的各种字符集和字符编码，如<code>gb2312，utf-8</code>（通常我们说Charset包括了相应的字符编码方案）；</p><h4 id="Accept-Encoding"><a href="#Accept-Encoding" class="headerlink" title="Accept-Encoding"></a>Accept-Encoding</h4><p>作用： <code>浏览器申明自己接收的编码方法</code>，通常指定压缩方法，是否支持压缩，支持什么压缩方法（gzip，deflate），（注意：这不是只字符编码）;<br>例如： Accept-Encoding: gzip, deflate</p><h4 id="Accept-Language"><a href="#Accept-Language" class="headerlink" title="Accept-Language"></a>Accept-Language</h4><p>作用： <code>浏览器申明自己接收的语言</code>。<br>语言跟字符集的区别：中文是语言，中文有多种字符集，比如big5，gb2312，gbk等等；<br>例如： Accept-Language: en-us</p><h4 id="Authorization"><a href="#Authorization" class="headerlink" title="Authorization"></a>Authorization</h4><p>作用：Web认证信息。</p><h4 id="Expect"><a href="#Expect" class="headerlink" title="Expect"></a>Expect</h4><p>作用：期待服务器的特定行为。</p><h4 id="Form"><a href="#Form" class="headerlink" title="Form"></a>Form</h4><p>作用：用户的电子邮箱地址</p><h4 id="Host（发送请求时，该报头域是必需的）"><a href="#Host（发送请求时，该报头域是必需的）" class="headerlink" title="Host（发送请求时，该报头域是必需的）"></a>Host（发送请求时，该报头域是必需的）</h4><p>作用: 请求报头域主要用于指定被请求资源的Internet主机和端口号，它通常从HTTP URL中提取出来的<br>例如: 我们在浏览器中输入：<a target="_blank" rel="noopener" href="http://www.guet.edu.cn/index.html">http://www.guet.edu.cn/index.html</a><br>浏览器发送的请求消息中，就会包含Host请求报头域，如下：<br>Host：<a target="_blank" rel="noopener" href="http://www.guet.edu.cn/">http://www.guet.edu.cn</a><br>此处使用缺省端口号80，若指定了端口号，则变成：Host：指定端口号</p><h4 id="If-Match"><a href="#If-Match" class="headerlink" title="If-Match"></a>If-Match</h4><p>作用：比较实体标记（Etag）</p><h4 id="If-Modified-Since"><a href="#If-Modified-Since" class="headerlink" title="If-Modified-Since"></a>If-Modified-Since</h4><p>作用：比较资源的更新时间（与Last-Modified配合实现协商缓存）</p><h4 id="If-None-Match"><a href="#If-None-Match" class="headerlink" title="If-None-Match"></a>If-None-Match</h4><p>作用：比较实体标记（与Etag配合实现协商缓存）</p><h4 id="If-Range"><a href="#If-Range" class="headerlink" title="If-Range"></a>If-Range</h4><p>作用：资源未更新时发送实体Byte的范围请求</p><h4 id="If-Unmodified-Since"><a href="#If-Unmodified-Since" class="headerlink" title="If-Unmodified-Since"></a>If-Unmodified-Since</h4><p>作用：比较资源的更新时间（与If-Modified-Since相反）</p><h4 id="Max-Forwards"><a href="#Max-Forwards" class="headerlink" title="Max-Forwards"></a>Max-Forwards</h4><p>作用：最大传输逐跳数</p><h4 id="Proxy-Authorization"><a href="#Proxy-Authorization" class="headerlink" title="Proxy-Authorization"></a>Proxy-Authorization</h4><p>作用：代理服务器要求客户端的认证信息</p><h4 id="Range"><a href="#Range" class="headerlink" title="Range"></a>Range</h4><p>作用：实体的字节范围请求</p><h4 id="Referer"><a href="#Referer" class="headerlink" title="Referer"></a>Referer</h4><p>作用： 提供了Request的上下文信息的服务器，告诉服务器我是从哪个链接过来的，比如从我主页上链接到一个朋友那里，他的服务器就能够从HTTP Referer中统计出每天有多少用户点击我主页上的链接访问他的网站。<br>例如: Referer:<a target="_blank" rel="noopener" href="http://translate.google.cn/?hl=zh-cn&amp;tab=wT">http://translate.google.cn/?hl=zh-cn&amp;tab=wT</a></p><h4 id="TE"><a href="#TE" class="headerlink" title="TE"></a>TE</h4><p>作用：传输编码的优先级</p><h4 id="User-Agent"><a href="#User-Agent" class="headerlink" title="User-Agent"></a>User-Agent</h4><p>作用：告诉HTTP服务器， 客户端使用的操作系统和浏览器的名称和版本。<br>我们上网登陆论坛的时候，往往会看到一些欢迎信息，其中列出了你的<code>操作系统的名称和版本</code>，你所使用的浏览器的名称和版本，这往往让很多人感到很神奇，实际上，服务器应用程序就是从User-Agent这个请求报头域中获取到这些信息User-Agent请求报头域<code>允许客户端将它的操作系统、浏览器和其它属性告诉服务器</code>。<br>例如： User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; CIBA; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0C; InfoPath.2; .NET4.0E)</p><h3 id="3-响应首部字段"><a href="#3-响应首部字段" class="headerlink" title="3. 响应首部字段"></a>3. 响应首部字段</h3><h4 id="Accept-Ranges"><a href="#Accept-Ranges" class="headerlink" title="Accept-Ranges"></a>Accept-Ranges</h4><p>作用：是否接受字节范围请求</p><h4 id="Age"><a href="#Age" class="headerlink" title="Age"></a>Age</h4><p>作用：推算资源创建经过时间</p><h4 id="ETag"><a href="#ETag" class="headerlink" title="ETag"></a>ETag</h4><p>作用：资源的匹配信息。根据实体内容生成的一段hash字符串（类似于MD5或者SHA1之后的结果），可以标识资源的状态。 当资源发送改变时，ETag也随之发生变化。</p><h4 id="Location"><a href="#Location" class="headerlink" title="Location"></a>Location</h4><p>作用：令客户端重定向至指定URI</p><h4 id="Proxy-Authenticate"><a href="#Proxy-Authenticate" class="headerlink" title="Proxy-Authenticate"></a>Proxy-Authenticate</h4><p>作用：代理服务器对客户端的认证信息</p><h4 id="Retry-After"><a href="#Retry-After" class="headerlink" title="Retry-After"></a>Retry-After</h4><p>作用：对再次发起请求的时机要求</p><h4 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h4><p>作用：指明HTTP服务器的软件信息<br>例如:Server: Microsoft-IIS/7.5</p><h4 id="Vary"><a href="#Vary" class="headerlink" title="Vary"></a>Vary</h4><p>作用：代理服务器缓存的管理信息</p><h4 id="WWW-Authenticate"><a href="#WWW-Authenticate" class="headerlink" title="WWW-Authenticate"></a>WWW-Authenticate</h4><p>作用：服务器对客户端的认证信息</p><h3 id="4-实体首部字段"><a href="#4-实体首部字段" class="headerlink" title="4. 实体首部字段"></a>4. 实体首部字段</h3><h4 id="Allow"><a href="#Allow" class="headerlink" title="Allow"></a>Allow</h4><p>作用：资源可支持的http方法</p><h4 id="Content-Type"><a href="#Content-Type" class="headerlink" title="Content-Type"></a>Content-Type</h4><p>作用：WEB服务器告诉浏览器自己响应的对象的类型和字符集,<br>例如:<br>Content-Type: text/html; charset=utf-8<br>Content-Type:text/html;charset=GB2312<br>Content-Type: image/jpeg</p><h4 id="Content-Length"><a href="#Content-Length" class="headerlink" title="Content-Length"></a>Content-Length</h4><p>指明实体正文的长度，以字节方式存储的十进制数字来表示。在数据下行的过程中，Content-Length的方式要预先在服务器中缓存所有数据，然后所有数据再一股脑儿地发给客户端。</p><p>例如: Content-Length: 19847</p><h4 id="Content-Language"><a href="#Content-Language" class="headerlink" title="Content-Language"></a>Content-Language</h4><p>作用：实体主体的自然语言。</p><h4 id="Content-Location"><a href="#Content-Location" class="headerlink" title="Content-Location"></a>Content-Location</h4><p>作用：替代对应资源的URI。</p><h4 id="Content-MD5"><a href="#Content-MD5" class="headerlink" title="Content-MD5"></a>Content-MD5</h4><p>作用：实体主体的报文摘要。</p><h4 id="Content-Range"><a href="#Content-Range" class="headerlink" title="Content-Range"></a>Content-Range</h4><p>作用：实体主体的位置范围。</p><h4 id="Content-Encoding"><a href="#Content-Encoding" class="headerlink" title="Content-Encoding"></a>Content-Encoding</h4><p>作用：实体主体适用的编码方式。</p><h4 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h4><p>作用： <strong>最重要的header</strong>, 将cookie的值发送给HTTP 服务器</p><h4 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h4><p>作用: http1.0中，浏览器会使用expires在指定<strong>过期时间</strong>内使用本地缓存，但是本地时间和服务器时间可能不一致，将导致出现问题，故在http1.1版本中使用max-age实现强缓存。<br>例如: Expires: Tue, 08 Feb 2022 11:35:14 GMT</p><h4 id="Last-Modified"><a href="#Last-Modified" class="headerlink" title="Last-Modified"></a>Last-Modified</h4><p>作用： 用于指示资源的最后修改日期和时间。（实例请看上节的If-Modified-Since的实例）<br>例如: Last-Modified: Wed, 21 Dec 2011 09:09:10 GMT</p><h4 id="X-AspNet-Version"><a href="#X-AspNet-Version" class="headerlink" title="X-AspNet-Version"></a>X-AspNet-Version</h4><p>作用：如果网站是用ASP.NET开发的，这个header用来表示ASP.NET的版本<br>例如: X-AspNet-Version: 4.0.30319</p><h4 id="X-Powered-By"><a href="#X-Powered-By" class="headerlink" title="X-Powered-By"></a>X-Powered-By</h4><p>作用：表示网站是用什么技术开发的<br>例如： X-Powered-By: ASP.NET</p><h2 id="三、-浏览器缓存"><a href="#三、-浏览器缓存" class="headerlink" title="三、 浏览器缓存"></a>三、 浏览器缓存</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/eroswang/article/details/8302191">浏览器缓存详解:expires,cache-control,last-modified,etag详细说明</a></p><p><a target="_blank" rel="noopener" href="https://juejin.im/post/6844904133024022536#heading-9">轻松理解浏览器缓存（Koa缓存源码解析）</a></p><p><a target="_blank" rel="noopener" href="https://juejin.im/post/6844903873333870600#heading-0">通过 koa2 服务器实践探究浏览器HTTP缓存机制</a></p><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000021661656">浏览器的强缓存和协商缓存</a></p><p><a target="_blank" rel="noopener" href="https://segmentfault.com/q/1010000004200644">为什么有了etag还需要last-modified?</a></p><blockquote><p>这两个不是同时出现的，last-modified是老的http标准就有的，ETag是后来的http标准里才有的，算是对modified的优化，解决了一些modified不能解决的问题。</p></blockquote><blockquote><p>主要是为了解决Last-Modified 无法解决的一些问题。</p><ol><li>某些服务器不能精确得到文件的最后修改时间， 这样就无法通过最后修改时间来判断文件是否更新了。</li><li>某些文件的修改非常频繁，在秒以下的时间内进行修改. Last-Modified只能精确到秒。</li><li>一些文件的最后修改时间改变了，但是内容并未改变。 我们不希望客户端认为这个文件修改了。</li></ol></blockquote><h2 id="四、Cookie探究"><a href="#四、Cookie探究" class="headerlink" title="四、Cookie探究"></a>四、Cookie探究</h2><h3 id="Cookie是什么？"><a href="#Cookie是什么？" class="headerlink" title="Cookie是什么？"></a>Cookie是什么？</h3><blockquote><p>HTTP cookie，通常直接叫做cookie，是客户端用来存储数据的一种选项，它既可以在客户端设置也可以在服务器端设置。cookie会跟随任意HTTP请求一起发送。</p></blockquote><h3 id="获取cookie"><a href="#获取cookie" class="headerlink" title="获取cookie"></a>获取cookie</h3><p>通过document.cookie可以获取当前域名下的cookie。<br>获取到的cookie的格式为<code>a=1; b=2; c=3</code></p><h3 id="如何设置cookie？"><a href="#如何设置cookie？" class="headerlink" title="如何设置cookie？"></a>如何设置cookie？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.cookie &#x3D; &quot;name&#x3D;value[; expires&#x3D;GMTDate][; domain&#x3D;domain][; path&#x3D;path][; secure]&quot;</span><br></pre></td></tr></table></figure><h3 id="cookie的字段详解"><a href="#cookie的字段详解" class="headerlink" title="cookie的字段详解"></a>cookie的字段详解</h3><table><thead><tr><th>字段</th><th>用处</th></tr></thead><tbody><tr><td>domain</td><td>控制 cookie对「哪个域」有效,可以包含子域也可以不包含。例如，Domain选项中，可以是”.google.com.hk”(不包含子域,表示它对google.com.hk的所有子域都有效)，也可以是”<a target="_blank" rel="noopener" href="http://www.google.com.hk&quot;(包含子域)./">www.google.com.hk&quot;(包含子域)。</a></td></tr><tr><td>path</td><td>控制cookie发送的指定域的「路径」，默认为”/“，表示指定域下的所有路径都能访问。它是在域名的基础下，指定可以访问的路径。例如cookie设置为”domain=.google.com.hk; path=/webhp”，那么只有”.google.com.hk/webhp”及”/webhp”下的任一子目录如”/webhp/aaa”或”/webhp/bbb”会发送cookie信息，而”.google.com.hk”就不会发送，即使它们来自同一个域。</td></tr><tr><td>expires</td><td>设置cookie的失效日期。设置GMT格式的日期(new Date().toGMTString())。如果设置一个过去的时间，这个cookie会被立即删除。</td></tr><tr><td>max-age</td><td>新的http协议使用max-age代替expires，它表示cookie的生存时长，单位为秒。若 max-age 为负值，则cookie将在浏览器会话结束后失效，即 session，max-age的默认值为-1。若 max-age 为0，则表示删除cookie。但我在chrome测试，设置为负值会直接删除该cookie，设置为session才会在浏览器会话结束后失效。</td></tr><tr><td>httponly</td><td>服务器端设置httponly后，存于浏览器的cookie只能由服务器端读取，前端不能通过document.cookie读取，可以减轻xss攻击的危害。前端无法设置httponly。</td></tr><tr><td>secure</td><td>指定后，cookie只有在使用SSL连接（如HTTPS请求）时才会发送到服务器。注意：只有保证网页是https协议(或其他安全协议)请求的，才能客户端在客户端通过 js 去设置secure 类型的 cookie。</td></tr><tr><td>sameSite</td><td>用来防止CSRF攻击和用户追踪。<a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2019/09/cookie-samesite.html">http://www.ruanyifeng.com/blog/2019/09/cookie-samesite.html</a></td></tr></tbody></table><h3 id="cookie的优缺点"><a href="#cookie的优缺点" class="headerlink" title="cookie的优缺点"></a>cookie的优缺点</h3><p>优点：兼容性好，用于存储身份认证信息会自动发送给服务器。<br>缺点：</p><ol><li>安全性：由于cookie在HTTP中是明文传递的，其中包含的数据都可以被他人访问，可能会被篡改、盗用。</li><li>大小限制：cookie的大小限制在4KB左右，若要做大量存储显然不是理想的选择。</li><li>增加流量：cookie每次请求都会被自动添加到Request Header中，无形中增加了流量。cookie信息越大，对服务器请求的时间也越长。</li></ol><h3 id="cookie操作封装"><a href="#cookie操作封装" class="headerlink" title="cookie操作封装"></a>cookie操作封装</h3><p><a target="_blank" rel="noopener" href="https://github.com/hello-astar/js/blob/master/cookie.js">示例代码</a></p><p>【参考】<br><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000004743454">常用的本地存储——cookie篇</a></p><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000039227924">COOKIE跨域获取问题</a></p><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie/SameSite">MDN - sameSite</a></p><div class="post-announce">感谢您的阅读，本文由 <a href="http://example.com">Astar</a> 版权所有。如若转载，请注明出处：Astar（<a href="http://example.com/2020/12/24/http%E5%8D%8F%E8%AE%AE%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87%E5%92%8C%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87/">http://example.com/2020/12/24/http%E5%8D%8F%E8%AE%AE%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87%E5%92%8C%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87/</a>）</div><div class="post__prevs"><div class="post__prev"><a href="/2020/12/23/CSS3%E7%9F%A9%E9%98%B5matrix%E8%BF%9B%E8%A1%8C2D%E5%8F%98%E6%8D%A2%E7%9A%84%E6%95%B0%E5%AD%A6%E5%8E%9F%E7%90%86/" title="CSS3矩阵matrix进行2D变换的数学原理"><i class="iconfont icon-prev"></i>CSS3矩阵matrix进行2D变换的数学原理</a></div><div class="post__prev post__prev--right"><a href="/2020/12/24/http%E7%8A%B6%E6%80%81%E7%A0%81/" title="http状态码">http状态码<i class="iconfont icon-next"></i></a></div></div></div></article><div id="comment-container"></div></div><aside class="page__sidebar"><form id="page-search-from" class="page__search-from" action="/search/"><label class="search-form__item"><input class="input" type="text" name="search" placeholder="回车搜索"> <i class="iconfont icon-search"></i></label></form><div class="sidebar__block"><h3 class="block__title">简介</h3><p class="block__text">日常学习与兴趣交流的个人博客</p></div><div class="sidebar__block"><h3 class="block__title">文章分类</h3><ul class="block-list"><li class="block-list-item"><a class="block-list-link" href="/categories/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/">问题排查</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E8%A7%84%E8%8C%83%E5%8C%96/">规范化</a><span class="block-list-count">2</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%92%8C%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">浏览器和计算机网络</a><span class="block-list-count">7</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">数据结构与算法</a><span class="block-list-count">3</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E5%BE%AE%E5%89%8D%E7%AB%AF/">微前端</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E5%BB%BA%E7%AB%99/">建站</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/">前端框架</a><span class="block-list-count">2</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/js/">js</a><span class="block-list-count">6</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/css/">css</a><span class="block-list-count">3</span></li></ul></div><div class="sidebar__block"><h3 class="block__title">最新文章</h3><ul class="block-list latest-post-list"><li class="latest-post-item"><a href="/2022/03/25/%E5%B8%B8%E7%94%A8git%E5%91%BD%E4%BB%A4/" title="常用git命令"><div class="item__cover"><img src="https://tse1-mm.cn.bing.net/th/id/R-C.47f1d668ae1c74d288e0cb0e822be203?rik=5R%2fXOkoiMWDLKA&riu=http%3a%2f%2fn.sinaimg.cn%2fsinakd20210215ac%2f790%2fw1539h851%2f20210215%2f8e28-kkciesq4857453.png&ehk=6LzXs%2fY4r%2bPpUrQQzgdKSNCNkTFwWg%2bMIRjlJ9BH1Ik%3d&risl=&pid=ImgRaw&r=0" alt="常用git命令"></div><div class="item__info"><h3 class="item__title">常用git命令</h3><span class="item__text">2022-03-25</span></div></a></li><li class="latest-post-item"><a href="/2022/02/24/css%E6%A0%B7%E5%BC%8F%E6%B2%A1%E7%94%9F%E6%95%88%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/" title="css样式没生效问题排查"><div class="item__cover"><img src="https://img2.baidu.com/it/u=3330810392,2639354941&fm=253&fmt=auto&app=138&f=JPEG?w=887&h=500" alt="css样式没生效问题排查"></div><div class="item__info"><h3 class="item__title">css样式没生效问题排查</h3><span class="item__text">2022-02-24</span></div></a></li><li class="latest-post-item"><a href="/2022/01/19/%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88/" title="图片懒加载的两种实现方案"><div class="item__cover"><img src="https://img2.baidu.com/it/u=4193472195,2353099366&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500" alt="图片懒加载的两种实现方案"></div><div class="item__info"><h3 class="item__title">图片懒加载的两种实现方案</h3><span class="item__text">2022-01-19</span></div></a></li><li class="latest-post-item"><a href="/2022/01/17/%E5%89%8D%E7%AB%AF%E7%94%9F%E6%88%90CHANGELOG%E6%8C%87%E5%8D%97/" title="前端生成CHANGELOG指南"><div class="item__cover"><img src="https://img1.baidu.com/it/u=1869297395,2506210818&fm=253&fmt=auto&app=138&f=JPEG?w=499&h=281" alt="前端生成CHANGELOG指南"></div><div class="item__info"><h3 class="item__title">前端生成CHANGELOG指南</h3><span class="item__text">2022-01-17</span></div></a></li></ul></div><div class="sidebar__block"><h3 class="block__title">文章标签</h3><ul class="block-list tag-list clearfix"><li class="tag-item"><a class="tag-link" href="/tags/css/">css</a></li><li class="tag-item"><a class="tag-link" href="/tags/git/">git</a></li><li class="tag-item"><a class="tag-link" href="/tags/js%E5%9F%BA%E7%A1%80/">js基础</a></li><li class="tag-item"><a class="tag-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-item"><a class="tag-link" href="/tags/nginx/">nginx</a></li><li class="tag-item"><a class="tag-link" href="/tags/qiankun/">qiankun</a></li><li class="tag-item"><a class="tag-link" href="/tags/shell/">shell</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E5%85%BC%E5%AE%B9ie/">兼容ie</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91/">平衡二叉树</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">性能优化</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/">排序算法</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E6%9C%80%E9%95%BF%E6%97%A0%E9%87%8D%E5%A4%8D%E5%AD%90%E4%B8%B2/">最长无重复子串</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0js/">模拟实现js</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E6%B8%B2%E6%9F%93%E6%9C%BA%E5%88%B6/">渲染机制</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/">网络基础</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/">自动部署</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E8%A7%84%E8%8C%83%E5%8C%96/">规范化</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E8%B7%A8%E5%9F%9F/">跨域</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/">问题排查</a></li></ul></div></aside></main><footer class="page__footer"><section class="footer__top"><div class="page__container footer__container"><div class="footer-top__item footer-top__item--2"><h3 class="item__title">关于</h3><div class="item__content"><p class="item__text">本站是基于Hexo搭建的静态资源博客，主要用于分享日常学习、生活及工作的一些心得总结，欢迎点击右下角订阅 rss。</p><ul class="footer__contact-info"><li class="contact-info__item"><i class="iconfont icon-address"></i> <span>ShenZhen, Guangdong Province, China</span></li><li class="contact-info__item"><i class="iconfont icon-email2"></i> <span>2320390964@qq.com</span></li></ul></div></div><div class="footer-top__item footer__image"><img src="/img/qrcode.jpg" alt="logo" title="Astar"></div></div></section><section class="footer__bottom"><div class="page__container footer__container"><p class="footer__copyright">© <a href="https://github.com/Mrminfive/hexo-theme-skapp" target="_blank">Skapp</a> 2017 powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, made by <a href="https://github.com/Mrminfive" target="_blank">minfive</a>.</p><ul class="footer__social-network clearfix"></ul></div></section></footer><div id="back-top" class="back-top back-top--hidden js-hidden"><i class="iconfont icon-top"></i></div></div><script src="/js/common.js"></script><script src="/js/page/post.js"></script><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script src="/js/md5.min.js"></script><script>var tags=["网络基础"],gitalk=new Gitalk({clientID:"f75b0e86fdac67670255",clientSecret:"ec0d30e74282751b50189f8554788c36de21c86a",repo:"hello-astar.github.io",owner:"hello-astar",admin:["hello-astar"],labels:tags,id:new Date(1608776264e3).getTime()>new Date("2018-02-15").getTime()?md5(location.href):location.href});gitalk.render("comment-container")</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>